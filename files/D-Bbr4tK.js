import{L as w,k as x,M as y,m as d,o as c,c as m,a as e,N as k,J as p,O as f,u as l,Q as h,t as q,i as E,R as M}from"./WZPZbsBb.js";import{a as v}from"./Z7ywJBlV.js";const S={class:"container mx-auto mt-20"},B={class:"flex justify-center"},N={class:"w-full max-w-md p-3"},U=e("h2",{class:"text-3xl font-bold text-center"}," Login ",-1),V={class:"mt-4"},D=e("label",{for:"email",class:"block mb-2 text-sm font-medium"},"Email:",-1),L=M('<datalist id="id-list"><option value="michael.lawson@reqres.in"></option><option value="lindsay.ferguson@reqres.in"></option><option value="tobias.funke@reqres.in"></option><option value="byron.fields@reqres.in"></option><option value="george.edwards@reqres.in"></option><option value="rachel.howell@reqres.in"></option></datalist>',1),R={class:"mt-4"},T=e("label",{for:"password",class:"block mb-2 text-sm font-medium"},"Senha:",-1),$=e("div",{class:"mt-6"},[e("button",{type:"submit",class:"w-full px-4 py-2 bg-blue-600 rounded-md hover:bg-blue-600"}," Entrar ")],-1),A={key:0,class:"text-center p-3 mt-3 bg-red-600 text-white rounded-md"},z={__name:"login",setup(C){const _=w(),{$toast:u}=x(),b=y(),s=d("michael.lawson@reqres.in"),a=d("tantoFazBastaMailCorreto"),r=d(""),g=async()=>{if(!s.value||!a.value){u.error("Email e senha são obrigatórios"),r.value="Email e senha são obrigatórios";return}let i,o;try{const n=await $fetch(v.auth,{method:"POST",body:{email:s.value,password:a.value}});i=n.id,o=n.token}catch(n){r.value=`Email ou senha incorretos: 
`+n.data.error}if(!o||!i){u.error("Email ou senha incorretos");return}const{data:t}=await $fetch(v.userDataById(i),{method:"GET"});if(t){_.setUser(t),b.push("/");return}u.error("Houve um erro no Login"),r.value="Email ou senha incorretos"};return(i,o)=>(c(),m("div",S,[e("div",B,[e("div",N,[U,e("form",{onSubmit:k(g,["prevent"])},[e("div",V,[D,p(e("input",{id:"email","onUpdate:modelValue":o[0]||(o[0]=t=>h(s)?s.value=t:null),list:"id-list",type:"email",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Digite @res para usar emails disponíveis"},null,512),[[f,l(s)]]),L]),e("div",R,[T,p(e("input",{id:"password","onUpdate:modelValue":o[1]||(o[1]=t=>h(a)?a.value=t:null),type:"password",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Apenas demonstração, qualquer senha é válida"},null,512),[[f,l(a)]])]),$,l(r)?(c(),m("p",A,q(l(r)),1)):E("",!0)],32)])])]))}};export{z as default};
